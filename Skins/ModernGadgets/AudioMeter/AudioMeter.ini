[Rainmeter]
MiddleMouseDownAction=[!Refresh]
MouseOverAction=[!ToggleMeterGroup ConfigButton1][!UpdateMeterGroup ConfigButton1][!UpdateMeterGroup Background][!Redraw]
MouseLeaveAction=[!ToggleMeterGroup ConfigButton1][!UpdateMeterGroup ConfigButton1][!UpdateMeterGroup Background][!Redraw]
OnRefreshAction=[!CommandMeasure MeasureActionTimer "Execute 3"][!CommandMeasure MeasureActionTimer "Execute 4"][!CommandMeasure MeasureActionTimer "Execute 5"]
Group=ModernGadgets | MgGlobalRefresh | MgImportRefresh
AccurateText=1
DynamicWindowSize=1
Update=#audioMeterUpdateRate#
DefaultUpdateDivider=#audioMeterDefaultUpdateDivider#

; Custom Context Menu
ContextTitle=Audio Meter settings
ContextAction=[!ActivateConfig "ModernGadgets\AudioMeter\Settings" "AudioMeterSettings.ini"]
ContextTitle2=Global settings
ContextAction2=[!ActivateConfig "ModernGadgets\Settings\GlobalSettings" "GlobalSettings.ini"]
ContextTitle3=Gadget manager
ContextAction3=[!ActivateConfig "ModernGadgets\Settings\GadgetManager" "GadgetManager.ini"]

[Metadata]
Name=CPU
Author=raiguard
Information=A compact audio controller/player with a simple audio visualizer along the bottom.
License=Creative Commons Attribution-NonCommercial-ShareAlike 3.0
Version=1.7.0

[Variables]
@includeStyleSheet=#@#StyleSheet.inc
@includeGlobalSettings=#@#Settings\GlobalSettings.inc
@includeAudioSettings=#@#Settings\AudioSettings.inc

toEdgeWidth=(#contentMarginRight# - [&[#CURRENTSECTION]:X] + #bgOffset#)
colorRepeatButton=#colorDim#
colorShuffleButton=#colorDim#
colorPlayPauseButton=#colorDim#

; Volume slider
newVolume=50
volumeSliderHandleRadius=3
volumeSliderHandleAnimation=0
volumeSliderHandleX=0
volumeSliderWidth=(#contentMarginRight# - [MeterVolumeSlider:X] - 4)
; Song Progress slider
progressSliderHandleRadius=3
progressSliderHandleAnimation=0
progressSliderHandleX=0
progressSliderWidth=(#contentWidth# - 2)
; Visualizer
vBarHeight=30
vBarWidth=(6 * #scale#)
vBarGap=1
visualizerStartX=5
; Update rate
audioMeterUpdateRate=(#smoothUpdates# = 1) ? 16 : 32
audioMeterDefaultUpdateDivider=(#smoothUpdates# = 1) ? 60 : 30
; Dynamic Variables
marqueeTitle=0
marqueeArtist=0
marqueeAlbum=0
volumeIcon_fill_2=0
volumeIcon_fill_3=0
volumeIcon_fill_4=0
volumeIcon_fill_5=0
; Marquee settings
animationSpeed=48
animationMultiplier=1
marqueeBeginWait=1500
marqueeEndWait=1500

[StyleMediaControls]
X=5R
Y=r
TransformationMatrix=#transformationMatrix#
DynamicVariables=1
Group=MediaControls
Hidden=(#showMediaControls# = 0)
Fill=Fill Color #colorDim#

[StyleMediaPlayButton]
Shape=Path Path1 | StrokeWidth 0 | Scale 0.02,0.02,0,0 | Offset 0,0.5 | Extend Fill
Path1 = 424.4, 214.7 | LineTo 72.4, 6.6 | CurveTo 0, 47.9, 43.8, -10.3, 0, 6.1 | LineTo 0, 464 | CurveTo 72.4, 505.3, 0, 501.5, 40.7, 524.1 | LineTo 424.4, 297.3 | CurveTo 424.4, 214.7, 455.8, 278.8, 455.9, 233.2 | ClosePath 1

[StyleMediaPauseButton]
Shape=Path Path1 | StrokeWidth 0 | Extend Fill
Shape2=Path Path2 | StrokeWidth 0
Shape3=Combine Shape | XOR Shape2 | Scale 0.02,0.02,0,0 | Offset 0,0.5
Path1 = 144, 479 | LineTo 48, 479 | CurveTo 0, 431, 21.5, 479, 0, 457.5 | LineTo 0, 79 | CurveTo 48, 31, 0, 52.5, 21.5, 31 | LineTo 144, 31 | CurveTo 192, 79, 170.5, 31, 192, 52.5 | LineTo 192, 431 | CurveTo 144, 479, 192, 457.5, 170.5, 479 | ClosePath 1
Path2 = 448, 431 | LineTo 448, 79 | CurveTo 400, 31, 448, 52.5, 426.5, 31 | LineTo 304, 31 | CurveTo 256, 79, 277.5, 31, 256, 52.5 | LineTo 256, 431 | CurveTo 304, 479, 256, 457.5, 277.5, 479 | LineTo 400, 479 | CurveTo 448, 431, 426.5, 479, 448, 457.5 | ClosePath 1

; ==================================================
;  MEASURES
; ==================================================

[MeasureSettingsScript]
Measure=Script
ScriptFile=#scriptPath#Settings.lua

; - Audio Visualizer -

[MeasureAudioRaw]
Measure=Plugin
Plugin=AudioLevel
FFTSize=#fftSize#
FFTAttack=#fftAttack#
FFTDecay=#fftDecay#
Bands=21
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand1]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=1
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand2]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=2
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand3]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=3
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand4]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=4
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand5]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=5
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand6]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=6
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand7]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=7
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand8]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=8
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand9]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=9
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand10]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=10
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand11]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=11
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand12]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=12
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand13]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=13
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand14]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=14
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand15]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=15
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand16]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=16
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand17]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=17
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand18]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=18
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand19]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=19
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

[MeasureAudioBand20]
Measure=Plugin
Plugin=AudioLevel
Parent=MeasureAudioRaw
Type=Band
BandIdx=20
UpdateDivider=1
Group=VisualizerBands
Disabled=(#showVisualizer# = 0)

; - Volume Slider -

[MeasureVolume]
Measure=Plugin
Plugin=Win7AudioPlugin
UpdateDivider=1
IfCondition=1
IfTrueAction=[!SetVariable volumeSliderHandleX "[MeasureVolume:/100] * #volumeSliderWidth#"]
; Mute button state
IfCondition2=MeasureVolume = -1
IfTrueAction2=[!SetVariable volumeIcon_fill_2 0][!SetVariable volumeIcon_fill_3 0][!SetVariable volumeIcon_fill_4 0][!SetVariable volumeIcon_fill_5 5][!UpdateMeter MeterVolumeIcon_][!Redraw]
IfCondition3=MeasureVolume = 0
IfTrueAction3=[!SetVariable volumeIcon_fill_2 0][!SetVariable volumeIcon_fill_3 0][!SetVariable volumeIcon_fill_4 0][!SetVariable volumeIcon_fill_5 0][!UpdateMeter MeterVolumeIcon_][!Redraw]
IfCondition4=(MeasureVolume > 0) && (MeasureVolume <= 33)
IfTrueAction4=[!SetVariable volumeIcon_fill_2 2][!SetVariable volumeIcon_fill_3 0][!SetVariable volumeIcon_fill_4 0][!SetVariable volumeIcon_fill_5 0][!UpdateMeter MeterVolumeIcon_][!Redraw]
IfCondition5=(MeasureVolume > 33) && (MeasureVolume <= 66)
IfTrueAction5=[!SetVariable volumeIcon_fill_2 2][!SetVariable volumeIcon_fill_3 3][!SetVariable volumeIcon_fill_4 0][!SetVariable volumeIcon_fill_5 0][!UpdateMeter MeterVolumeIcon_][!Redraw]
IfCondition6=(MeasureVolume > 66)
IfTrueAction6=[!SetVariable volumeIcon_fill_2 2][!SetVariable volumeIcon_fill_3 3][!SetVariable volumeIcon_fill_4 4][!SetVariable volumeIcon_fill_5 0][!UpdateMeter MeterVolumeIcon_][!Redraw]

[MeasureVolumeSliderMouse]
Measure=Plugin
Plugin=Mouse
LeftMouseDragAction=[!SetVariable volumeSliderHandleX "(clamp(($MouseX$ / #scale#),[MeterVolumeSlider:X],([MeterVolumeSlider:X] + [MeterVolumeSlider:W])))"][!UpdateMeasure MeasureVolumeSliderSet][!UpdateMeasure MeasureVolume][!UpdateMeter MeterVolumeSlider][!Redraw]
LeftMouseUpAction=[!CommandMeasure MeasureVolumeSliderMouse "Stop"][!DisableMeasure MeasureVolumeSliderSet][!Delay 1][!EnableMouseActionGroup * VolumeSliderActions]
RelativeToSkin=1
RequireDragging=1
DynamicVariables=1

[MeasureVolumeSliderSet]
Measure=Calc
Formula=#volumeSliderHandleX#
MinValue=[MeterVolumeSlider:X]
MaxValue=([MeterVolumeSlider:X] + [MeterVolumeSlider:W])
DynamicVariables=1
OnChangeAction=[!CommandMeasure MeasureVolume "SetVolume [MeasureVolumeSliderSet:%,0]"]
UpdateDivider=-1
Disabled=1

; - Progress Slider -

[MeasureProgressSliderMouse]
Measure=Plugin
Plugin=Mouse
LeftMouseDragAction=[!SetVariable progressSliderHandleX "(clamp(($MouseX$ / #scale#),[MeterMediaProgressSlider:X],([MeterMediaProgressSlider:X] + [MeterMediaProgressSlider:W])))"][!UpdateMeasure MeasureProgressSliderSet][!UpdateMeasure Measure#npType#MediaProgress][!UpdateMeter MeterMediaProgressSlider][!Redraw]
LeftMouseUpAction=[!CommandMeasure MeasureProgressSliderMouse "Stop"][!DisableMeasure MeasureProgressSliderSet][!Delay 1][!EnableMouseActionGroup * ProgressSliderActions]
RelativeToSkin=1
RequireDragging=1
DynamicVariables=1

[MeasureProgressSliderSet]
Measure=Calc
Formula=#progressSliderHandleX#
MinValue=[MeterMediaProgressSlider:X]
MaxValue=([MeterMediaProgressSlider:X] + [MeterMediaProgressSlider:W])
DynamicVariables=1
OnChangeAction=[!CommandMeasure Measure#npType#MediaProgress "SetPosition [MeasureProgressSliderSet:%,4]"]
UpdateDivider=-1
Disabled=1

; ----- Media Controller -----

[MeasureMediaControlsVisibility]
Measure=Calc
IfCondition=(Measure#npType#MediaDuration > 0) && (#scale# = 1)
IfTrueAction=[!ShowMeterGroup TrackInfo][!UpdateMeterGroup TrackInfo][!ShowMeterGroup MediaControls][!UpdateMeterGroup MediaControls][!UpdateMeter MeterVisualizer][!UpdateMeterGroup Background][!Redraw]
IfCondition2=(Measure#npType#MediaDuration > 0) && (#scale# <> 1)
IfTrueAction2=[!ShowMeterGroup TrackInfoNoScale][!UpdateMeterGroup TrackInfoNoScale][!ShowMeterGroup MediaControls][!UpdateMeterGroup MediaControls][!UpdateMeter MeterVisualizer][!UpdateMeterGroup Background][!Redraw]
IfCondition3=(Measure#npType#MediaDuration = 0)
IfTrueAction3=[!HideMeterGroup TrackInfo][!UpdateMeterGroup TrackInfo][!HideMeterGroup TrackInfoNoScale][!UpdateMeterGroup TrackInfoNoScale][!HideMeterGroup MediaControls][!UpdateMeterGroup MediaControls][!UpdateMeter MeterVisualizer][!UpdateMeterGroup Background][!Redraw]
IfConditionMode=1
DynamicVariables=1
UpdateDivider=-1
Disabled=(#mediaControlsAutoHide# = 0)

; - Local Measures -

[MeasureLocalMediaCoverArt]
Measure=NowPlaying
PlayerName=#mediaPlayer#
PlayerType=Cover
UpdateDivider=1
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaTitle]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Title
Substitute="":"--"
Disabled=(#showMediaControls# <> 1)
OnChangeAction=[!CommandMeasure MeasureActionTimer "Stop 3"][!CommandMeasure MeasureActionTimer "Stop 4"][!CommandMeasure MeasureActionTimer "Stop 5"][!SetVariable marqueeTitle 0][!SetVariable marqueeArist 0][!SetVariable marqueeAlbum 0][!UpdateMeterGroup SongInfo][!Redraw][!CommandMeasure MeasureActionTimer "Execute 3"][!CommandMeasure MeasureActionTimer "Execute 4"][!CommandMeasure MeasureActionTimer "Execute 5"]

[MeasureLocalMediaArtist]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Artist
Substitute="":"--"
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaAlbum]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Album
Substitute="":"--"
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaProgress]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Progress
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaPosition]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Position
UpdateDivider=5
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaDuration]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Duration
Disabled=(#showMediaControls# <> 1)
OnChangeAction=[!UpdateMeasure MeasureMediaControlsVisibility]

[MeasureLocalMediaRemaining]
Measure=Uptime
SecondsValue=([MeasureLocalMediaDuration:] - [MeasureLocalMediaPosition:])
Format=%2!02i!:%1!02i!
DynamicVariables=1
UpdateDivider=5
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaPlayPause]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=State
Substitute="^0$":"Play","^1$":"Pause","^2$":"Play","^3$":"Play"
RegExpSubstitute=1
UpdateDivider=1
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaRepeat]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Repeat
Substitute="^0$":"0","^1$":"0","^2$":"3"
RegExpSubstitute=1
IfCondition=MeasureLocalMediaRepeat = 0
IfTrueAction=[!SetVariable colorRepeatButton "#colorDim#"][!UpdateMeter MeterMediaRepeat_][!Redraw]
IfCondition2=MeasureLocalMediaRepeat > 0
IfTrueAction2=[!SetVariable colorRepeatButton "#colorAccent#"][!UpdateMeter MeterMediaRepeat_][!Redraw]
UpdateDivider=1
Disabled=(#showMediaControls# <> 1)

[MeasureLocalMediaShuffle]
Measure=NowPlaying
PlayerName=[MeasureLocalMediaCoverArt]
PlayerType=Shuffle
IfCondition=MeasureLocalMediaShuffle = 0
IfTrueAction=[!SetVariable colorShuffleButton "#colorDim#"][!UpdateMeter MeterMediaShuffle_][!Redraw]
IfCondition2=MeasureLocalMediaShuffle = 1
IfTrueAction2=[!SetVariable colorShuffleButton "#colorAccent#"][!UpdateMeter MeterMediaShuffle_][!Redraw]
UpdateDivider=1
Disabled=(#showMediaControls# <> 1)

; - Web Measures -

[MeasureWebMediaStatus]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Status
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaCoverArt]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Cover
CoverPath=C:\Windows\Temp\webnowplaying_cover.png
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaTitle]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Title
Substitute="":"--"
Disabled=(#showMediaControls# < 2)
UpdateDivider=1
OnChangeAction=[!CommandMeasure MeasureActionTimer "Stop 3"][!CommandMeasure MeasureActionTimer "Stop 4"][!CommandMeasure MeasureActionTimer "Stop 5"][!SetVariable marqueeTitle 0][!SetVariable marqueeArist 0][!SetVariable marqueeAlbum 0][!UpdateMeterGroup SongInfo][!Redraw][!CommandMeasure MeasureActionTimer "Execute 3"][!CommandMeasure MeasureActionTimer "Execute 4"][!CommandMeasure MeasureActionTimer "Execute 5"][!UpdateMeasure MeasureMediaControlsVisibility]

[MeasureWebMediaArtist]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Artist
Substitute="":"--"
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaAlbum]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Album
Substitute="":"--"
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaProgress]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Progress
UpdateDivider=5
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaPosition]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Position
UpdateDivider=5
Substitute="\s":"","^(\d)\:":"0\1:"
RegExpSubstitute=1
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaDuration]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Duration
Disabled=(#showMediaControls# < 2)
OnChangeAction=[!UpdateMeasure MeasureMediaControlsVisibility]

[MeasureWebMediaRemaining]
Measure=Uptime
SecondsValue=([MeasureWebMediaDuration:] - [MeasureWebMediaPosition:])
Format=%2!02i!:%1!02i!
DynamicVariables=1
UpdateDivider=5
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaPlayPause]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=State
Substitute="^0$":"Play","^1$":"Pause","^2$":"Play","^3$":"Play"
RegExpSubstitute=1
UpdateDivider=1
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaRepeat]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Repeat
Substitute="^0$":"0","^1$":"0","^2$":"3"
RegExpSubstitute=1
IfCondition=MeasureWebMediaRepeat = 0
IfTrueAction=[!SetVariable colorRepeatButton "#colorDim#"][!UpdateMeter MeterMediaRepeat_][!Redraw]
IfCondition2=MeasureWebMediaRepeat > 0
IfTrueAction2=[!SetVariable colorRepeatButton "#colorAccent#"][!UpdateMeter MeterMediaRepeat_][!Redraw]
UpdateDivider=1
Disabled=(#showMediaControls# < 2)

[MeasureWebMediaShuffle]
Measure=Plugin
Plugin=WebNowPlaying
PlayerType=Shuffle
IfCondition=MeasureWebMediaShuffle = 0
IfTrueAction=[!SetVariable colorShuffleButton "#colorDim#"][!UpdateMeter MeterMediaShuffle_][!Redraw]
IfCondition2=MeasureWebMediaShuffle = 1
IfTrueAction2=[!SetVariable colorShuffleButton "#colorAccent#"][!UpdateMeter MeterMediaShuffle_][!Redraw]
UpdateDivider=1
Disabled=(#showMediaControls# < 2)

; - Button Logic -

[MeasureMediaShuffleButtonLogic]
Measure=Calc
IfCondition=#showMediaControls# = 1
IfTrueAction=[!CommandMeasure MeasureLocalMediaCoverArt "SetShuffle -1"]
IfCondition2=#showMediaControls# = 2
IfTrueAction2=[!CommandMeasure MeasureWebMediaCoverArt "Shuffle"]
IfConditionMode=1
UpdateDivider=-1
Disabled=1

[MeasureMediaRepeatButtonLogic]
Measure=Calc
IfCondition=#showMediaControls# = 1
IfTrueAction=[!CommandMeasure MeasureLocalMediaCoverArt "SetRepeat -1"]
IfCondition2=#showMediaControls# = 2
IfTrueAction2=[!CommandMeasure MeasureWebMediaCoverArt "Repeat"]
IfConditionMode=1
UpdateDivider=-1
Disabled=1

; ----- ActionTimer -----

[MeasureMarqueeTitleOffset]
Measure=Calc
Formula=max(0,([MeterMediaTitle:W] - [MeterMediaInfoContainer:W] + 2))
DynamicVariables=1

[MeasureMarqueeArtistOffset]
Measure=Calc
Formula=max(0,([MeterMediaArtist:W] - [MeterMediaInfoContainer:W] + 2))
DynamicVariables=1

[MeasureMarqueeAlbumOffset]
Measure=Calc
Formula=max(0,([MeterMediaAlbum:W] - [MeterMediaInfoContainer:W] + 2))
DynamicVariables=1

[MeasureActionTimer]
Measure=Plugin
Plugin=ActionTimer
; Volume Slider Handle animation
ActionList1=Repeat VSHIncrease,32,#volumeSliderHandleRadius#
VSHIncrease=[!SetVariable volumeSliderHandleAnimation "(clamp((#volumeSliderHandleAnimation# + 1),0,#volumeSliderHandleRadius#))"][!UpdateMeter MeterVolumeSlider][!UpdateMeasure MeasureActionTimer][!Redraw]
ActionList2=Repeat VSHDecrease,32,#volumeSliderHandleRadius#
VSHDecrease=[!SetVariable volumeSliderHandleAnimation "(clamp((#volumeSliderHandleAnimation# - 1),0,#volumeSliderHandleRadius#))"][!UpdateMeter MeterVolumeSlider][!UpdateMeasure MeasureActionTimer][!Redraw]
; Marquee Title
ActionList3=ResetTitle | Wait #marqueeBeginWait# | Repeat MoveTitle,#animationSpeed#,[MeasureMarqueeTitleOffset:] | Wait #marqueeEndWait# | DoOverTitle
ResetTitle=[!SetVariable marqueeTitle 0][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaTitle][!Redraw]
MoveTitle=[!SetVariable marqueeTitle "(#marqueeTitle# - #animationMultiplier#)"][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaTitle][!Redraw]
DoOverTitle=[!CommandMeasure MeasureActionTimer "Execute 3"]
; Marquee Artist
ActionList4=ResetArtist | Wait #marqueeBeginWait# | Repeat MoveArtist,#animationSpeed#,[MeasureMarqueeArtistOffset:] | Wait #marqueeEndWait# | DoOverArtist
ResetArtist=[!SetVariable marqueeArtist 0][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaArtist][!Redraw]
MoveArtist=[!SetVariable marqueeArtist "(#marqueeArtist# - #animationMultiplier#)"][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaArtist][!Redraw]
DoOverArtist=[!CommandMeasure MeasureActionTimer "Execute 4"]
; Marquee Album
ActionList5=ResetAlbum | Wait #marqueeBeginWait# | Repeat MoveAlbum,#animationSpeed#,[MeasureMarqueeAlbumOffset:] | Wait #marqueeEndWait# | DoOverAlbum
ResetAlbum=[!SetVariable marqueeAlbum 0][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaAlbum][!Redraw]
MoveAlbum=[!SetVariable marqueeAlbum "(#marqueeAlbum# - #animationMultiplier#)"][!UpdateMeasure MeasureActionTimer][!UpdateMeter MeterMediaAlbum][!Redraw]
DoOverAlbum=[!CommandMeasure MeasureActionTimer "Execute 5"]
DynamicVariables=1
; Song Progress Slider Handle animation
ActionList6=Repeat SPSIncrease,32,#progressSliderHandleRadius#
SPSIncrease=[!SetVariable progressSliderHandleAnimation "(clamp((#progressSliderHandleAnimation# + 1),0,#progressSliderHandleRadius#))"][!UpdateMeter MeterVolumeSlider][!UpdateMeasure MeasureActionTimer][!Redraw]
ActionList7=Repeat SPSDecrease,32,#progressSliderHandleRadius#
SPSDecrease=[!SetVariable progressSliderHandleAnimation "(clamp((#progressSliderHandleAnimation# - 1),0,#progressSliderHandleRadius#))"][!UpdateMeter MeterVolumeSlider][!UpdateMeasure MeasureActionTimer][!Redraw]

; ==================================================
;  METERS
; ==================================================

[MeterBackground]
Meter=Shape
MeterStyle=StyleBackground

; ----- Volume Slider -----

[MeterVolumeIcon_]
Meter=Shape
X=#contentMargin#
Y=#contentMargin#
Shape = Path Path1 | StrokeWidth 0 | Extend Fill
Shape2 = Path Path#volumeIcon_fill_2# | StrokeWidth 0
Shape3 = Path Path#volumeIcon_fill_3# | StrokeWidth 0
Shape4 = Path Path#volumeIcon_fill_4# | StrokeWidth 0
Shape5 = Path Path#volumeIcon_fill_5# | StrokeWidth 0
Shape6 = Combine Shape1 | XOR Shape2 | XOR Shape3 | XOR Shape4 | XOR Shape5 | Scale 0.04,0.040,0,0 | Offset 3,1
Path0 = 0,200 | LineTo 600,200.1
Path1 = 215.03, 71.05 | LineTo 126.06, 160 | LineTo 24, 160 | CurveTo 0, 184, 10.74, 160, 0, 170.74 | LineTo 0, 328 | CurveTo 24, 352, 0, 341.25, 10.74, 352 | LineTo 126.06, 352 | LineTo 215.03, 440.95 | CurveTo 256, 423.98, 230.06, 455.98, 256, 445.42 | LineTo 256, 88.02 | CurveTo 215.03, 71.05, 256, 66.56, 230.04, 56.04 | ClosePath 1
Path2 = 338.23, 179.13 | CurveTo 305.62, 188.58, 326.65, 172.8, 312.04, 176.97 | CurveTo 315.07, 221.19, 299.23, 200.19, 303.46, 214.78 | CurveTo 336, 256, 327.98, 228.28, 336, 241.63 | CurveTo 315.08, 290.81, 336, 270.38, 327.98, 283.72 | CurveTo 305.63, 323.42, 303.47, 297.22, 299.24, 311.81 | CurveTo 338.24, 332.87, 312.06, 335.08, 326.68, 339.22 | CurveTo 384.01, 255.99, 366.47, 317.32, 384.01, 287.87 | CurveTo 338.23, 179.13, 384.01, 224.11, 366.47, 194.67 | ClosePath 1
Path3 = 480, 256 | CurveTo 394.23, 99.76, 480, 192.47, 447.94, 134.06 | CurveTo 361.11, 107.22, 383.04, 92.62, 368.2, 95.94 | CurveTo 368.52, 140.58, 354.02, 118.5, 357.33, 133.43 | CurveTo 432, 256, 408.27, 165.97, 432, 209.11 | CurveTo 368.52, 371.42, 432, 302.89, 408.27, 346.03 | CurveTo 361.11, 404.78, 357.33, 378.56, 354.02, 393.49 | CurveTo 394.23, 412.24, 367.62, 415.14, 382.23, 419.92 | CurveTo 480, 256, 447.94, 377.94, 480, 319.54 | ClosePath 1
Path4 = 448.35, 19.97 | CurveTo 414.84, 26.92, 437.18, 12.64, 422.17, 15.73 | CurveTo 421.79, 60.43, 407.5, 38.09, 410.62, 53.1 | CurveTo 527.61, 256.01, 488.06, 103.92, 527.61, 177.03 | CurveTo 421.79, 451.59, 527.61, 334.99, 488.06, 408.1 | CurveTo 414.84, 485.09, 410.62, 458.91, 407.5, 473.93 | CurveTo 448.35, 492.04, 421.88, 495.8, 436.77, 499.65 | CurveTo 576, 256, 528.27, 439.58, 576, 351.33 | CurveTo 448.35, 19.97, 576, 160.67, 528.27, 72.43 | ClosePath 1
Path5 = 461.64, 256 | LineTo 507.28, 210.36 | CurveTo 507.28, 187.54, 513.58, 204.06, 513.58, 193.84 | LineTo 484.46, 164.72 | CurveTo 461.64, 164.72, 478.16, 158.42, 467.94, 158.42 | LineTo 416, 210.36 | LineTo 370.36, 164.72 | CurveTo 347.54, 164.72, 364.06, 158.42, 353.84, 158.42 | LineTo 324.72, 187.54 | CurveTo 324.72, 210.36, 318.42, 193.84, 318.42, 204.06 | LineTo 370.36, 256 | LineTo 324.73, 301.63 | CurveTo 324.73, 324.45, 318.43, 307.93, 318.43, 318.15 | LineTo 347.55, 347.27 | CurveTo 370.37, 347.27, 353.85, 353.57, 364.07, 353.57 | LineTo 416, 301.64 | LineTo 461.64, 347.28 | CurveTo 484.46, 347.28, 467.94, 353.58, 478.16, 353.58 | LineTo 507.28, 324.46 | CurveTo 507.28, 301.64, 513.58, 318.16, 513.58, 307.94 | LineTo 461.64, 256 | ClosePath 1
DynamicVariables=1
Fill=Fill Color #colorAccent#
TransformationMatrix=#transformationMatrix#

[MeterVolumeSlider]
Meter=Shape
Shape=Rectangle 0,#volumeSliderHandleRadius#,#volumeSliderWidth#,2,1 | StrokeWidth 0 | Fill Color #colorBorder#
Shape2=Rectangle 0,#volumeSliderHandleRadius#,(max((#volumeSliderWidth# * [MeasureVolume:/100]),0)),2,1 | StrokeWidth 0 | Fill Color #colorAccent#,220
Shape3=Ellipse (clamp((#volumeSliderWidth# * [MeasureVolume:/100]),0,(#volumeSliderWidth# - 1))),(#volumeSliderHandleRadius# + 1),#volumeSliderHandleAnimation# | StrokeWidth 0 | Fill Color #colorAccent#
X=3R
Y=2r
UpdateDivider=1
DynamicVariables=1
TransformationMatrix=#transformationMatrix#

[MeterVolumeSliderMouseRegion_]
Meter=Image
SolidColor=255,255,255,0
X=([MeterVolumeSlider:X] - #volumeSliderHandleRadius#)
Y=([MeterVolumeSlider:Y] - 1)
W=(#volumeSliderWidth# + (#volumeSliderHandleRadius# * 2))
H=(#volumeSliderHandleRadius# * 2 + 2)
DynamicVariables=1
UpdateDivider=1
TransformationMatrix=#transformationMatrix#

[MeterVolumeDevice_]
Meter=String
MeterStyle=StyleString
MeasureName=MeasureVolume
FontColor=#colorDim#
FontFace=#fontFaceCn#
X=3r
Y=R
W=([MeterVolumePercentage:X] - [#CURRENTSECTION#:X] - 2)
DynamicVariables=1
ClipString=1
UpdateDivider=1
Hidden=(#showDeviceSwitcher# = 0)

[MeterVolumePercentage]
Meter=String
MeterStyle=StyleString | StyleStringRightAlign
FontFace=#fontFaceCn#
X=(#contentMarginRight# - 5)
Text=[MeasureVolume:]%
DynamicVariables=1
UpdateDivider=1

; ----- Media Controller -----

[MeterMediaCoverArtBg]
Meter=Shape
MeterStyle=StyleLineGraphBackground
HorizontalLines=Fill Color 0,0,0,0 | StrokeWidth 0
VerticalLines=Fill Color 0,0,0,0 | StrokeWidth 0
X=(#contentMargin# + 2)
Y=((#showMediaControls# = 0) ? -10 : 3)R
W=47
H=47
Group=TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)

[MeterMediaCoverArtContainer]
Meter=Shape
MeterStyle=StyleLineGraphBackground | MeterMediaCoverArtBg
Shape=Rectangle 0,0,0,0 | StrokeWidth 0
Y=r
Group=TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
TransformationMatrix=#transformationMatrix#

[MeterMediaCoverArtPlaceholder]
Meter=Shape
Shape = Path Path1 | StrokeWidth 0 | Fill Color #colorDisabled# | Scale 0.045,0.045,0,0 | Offset 0,-32
Path1 = 256, 32 | CurveTo 0, 288, 114.52, 32, 0, 146.496 | LineTo 0, 336 | ArcTo 17.689, 364.622, 32, 32, 0, 1, 0 | LineTo 32.072, 371.813 | CurveTo 144, 480, 34.083, 431.903, 83.421, 480 | LineTo 168, 480 | CurveTo 192, 456, 181.255, 480, 192, 469.255 | LineTo 192, 280 | CurveTo 168, 256, 192, 266.745, 181.255, 256 | LineTo 144, 256 | CurveTo 64, 289.627, 112.658, 256, 84.329, 268.879 | LineTo 64, 288 | CurveTo 256, 96, 64, 182.131, 150.131, 96 | CurveTo 448, 288, 361.869, 96, 448, 182.131 | LineTo 448, 289.627 | CurveTo 368, 256, 427.671, 268.879, 399.342, 256 | LineTo 344, 256 | CurveTo 320, 280, 330.745, 256, 320, 266.745 | LineTo 320, 456 | CurveTo 344, 480, 320, 469.255, 330.745, 480 | LineTo 368, 480 | CurveTo 479.928, 371.813, 428.579, 480, 477.917, 431.902 | LineTo 494.31, 364.622 | ArcTo 512, 336, 32, 32, 0, 1, 0 | LineTo 512, 288 | CurveTo 256, 32, 512, 146.521, 397.504, 32 | ClosePath 1
X=12
Y=13
Group=TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
Container=MeterMediaCoverArtContainer
TransformationMatrix=#transformationMatrix#

[MeterMediaCoverArt]
Meter=Image
ImageName=[Measure[#npType]MediaCoverArt]
X=0
Y=0
H=47
DynamicVariables=1
Antialias=1
Group=TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
Container=MeterMediaCoverArtContainer
TransformationMatrix=#transformationMatrix#

[MeterMediaInfoContainer]
Meter=Image
SolidColor=255,255,255
X=3R
Y=[MeterMediaCoverArtBg:Y]
W=(#contentMarginRight# - [#CURRENTSECTION#:X])
H=([MeterMediaCoverArtBg:H])
DynamicVariables=1
Group=TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)

[MeterMediaTitle]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaTitle
FontWeight=900
FontFace=#fontFaceCn#
X=#marqueeTitle#
Y=2
DynamicVariables=1
ToolTipText=%1
Group=SongInfo | TrackInfo
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
Container=MeterMediaInfoContainer

[MeterMediaArtist]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaArtist
FontWeight=600
FontFace=#fontFaceCn#
X=#marqueeArtist#
ToolTipText=%1
Group=SongInfo | TrackInfo
DynamicVariables=1
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
Container=MeterMediaInfoContainer

[MeterMediaAlbum]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaAlbum
FontFace=#fontFaceCn#
X=#marqueeAlbum#
ToolTipText=%1
Group=SongInfo | TrackInfo
DynamicVariables=1
Hidden=(#showMediaControls# = 0) || (#scale# <> 1)
Container=MeterMediaInfoContainer

; No containers
[MeterMediaCoverArt-NoScaling]
Meter=Image
ImageName=[Measure[#npType]MediaCoverArt]
X=(#contentMargin# + 2)
Y=((#showMediaControls# = 0) ? -10 : 0)R
W=47
H=47
DynamicVariables=1
Antialias=1
Group=TrackInfoNoScale
Hidden=(#showMediaControls# = 0) || (#scale# = 1)
TransformationMatrix=#transformationMatrix#

[MeterMediaTitle-NoScaling_]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaTitle
FontWeight=900
FontFace=#fontFaceCn#
X=3R
Y=2r
W=(#contentMarginRight# - [&[#CURRENTSECTION]:X] + #bgOffset#)
ClipString=1
DynamicVariables=1
Group=SongInfo | TrackInfoNoScale
Hidden=(#showMediaControls# = 0) || (#scale# = 1)

[MeterMediaArtist-NoScaling_]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaArtist
FontWeight=600
FontFace=#fontFaceCn#
X=r
W=(#contentMarginRight# - [&[#CURRENTSECTION]:X] + #bgOffset#)
ClipString=1
Group=SongInfo | TrackInfoNoScale
DynamicVariables=1
Hidden=(#showMediaControls# = 0) || (#scale# = 1)

[MeterMediaAlbum-NoScaling_]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaAlbum
FontFace=#fontFaceCn#
X=r
W=(#contentMarginRight# - [&[#CURRENTSECTION]:X] + #bgOffset#)
ClipString=1
Group=SongInfo | TrackInfoNoScale
DynamicVariables=1
Hidden=(#showMediaControls# = 0) || (#scale# = 1)

; Media Controls
[MeterMediaProgressSlider]
Meter=Shape
Shape=Rectangle 0,#progressSliderHandleRadius#,#progressSliderWidth#,2,1 | StrokeWidth 0 | Fill Color #colorBorder#
Shape2=Rectangle 0,#progressSliderHandleRadius#,(clamp((#progressSliderWidth# * [Measure#npType#MediaProgress:/100]),0,(#progressSliderWidth#))),2,1 | StrokeWidth 0 | Fill Color #colorAccent#,220
Shape3=Ellipse (clamp((#progressSliderWidth# * [Measure#npType#MediaProgress:/100]),0,(#progressSliderWidth# - 1))),(#progressSliderHandleRadius# + 1),#progressSliderHandleAnimation# | StrokeWidth 0 | Fill Color #colorAccent#
X=(#contentMargin# + 1)
Y=((#scale# = 1) ? -2 : 2)R
UpdateDivider=1
DynamicVariables=1
TransformationMatrix=#transformationMatrix#
Group=MediaControls
Hidden=(#showMediaControls# = 0)

[MeterProgressSliderMouseRegion_]
Meter=Image
SolidColor=255,255,255,0
X=([MeterMediaProgressSlider:X] - #progressSliderHandleRadius#)
Y=([MeterMediaProgressSlider:Y] - 1)
W=(#progressSliderWidth# + (#progressSliderHandleRadius# * 2))
H=(#progressSliderHandleRadius# * 2 + 3)
DynamicVariables=1
UpdateDivider=1
TransformationMatrix=#transformationMatrix#
Group=MediaControls
Hidden=(#showMediaControls# = 0)

[MeterMediaPosition]
Meter=String
MeterStyle=StyleString
MeasureName=Measure[#npType]MediaPosition
FontFace=#fontFaceCn#
Y=R
UpdateDivider=5
Group=MediaControls
Hidden=(#showMediaControls# = 0)

[MeterMediaRemaining]
Meter=String
MeterStyle=StyleString | StyleStringRightAlign
MeasureName=Measure[#npType]MediaRemaining
FontFace=#fontFaceCn#
UpdateDivider=5
Group=MediaControls
Hidden=(#showMediaControls# = 0)

[MeterMediaShuffle_]
Meter=Shape
MeterStyle=StyleMediaControls
X=(#contentMarginCenter# - ((([MeterMediaRepeat_:X] + [MeterMediaRepeat_:W]) - [#CURRENTSECTION#:X]) / 2) - 1)
Y=1r
Shape = Path Path1 | StrokeWidth 0 | Extend Fill
Shape2 = Path Path2 | StrokeWidth 0
Shape3 = Path Path3 | StrokeWidth 0
Shape4 = Combine Shape1 | XOR Shape2 | XOR Shape3 | Scale 0.02,0.02,0,0 | Offset 0,0.5
Path1 = 504.971, 359.029 | CurveTo 504.971, 392.97, 514.344, 368.402, 514.344, 383.598 | LineTo 424.971, 472.954 | CurveTo 384, 455.983, 409.961, 487.964, 384, 477.444 | LineTo 384, 416 | LineTo 325.215, 416 | ArcTo 316.442, 412.188, 12.004, 12.004, 0, 0, 0 | LineTo 245.886, 336.592 | LineTo 299.219, 279.449 | LineTo 352, 336 | LineTo 384, 336 | LineTo 384, 296.019 | CurveTo 424.971, 279.048, 384, 274.581, 409.943, 264.021 | LineTo 504.971, 359.029 | ClosePath 1
Path2 = 12, 176 | LineTo 96, 176 | LineTo 148.781, 232.551 | LineTo 202.114, 175.408 | LineTo 131.558, 99.812 | ArcTo 122.785, 96, 11.999, 11.999, 0, 1, 0 | LineTo 12, 96 | CurveTo 0, 108, 5.373, 96, 0, 101.373 | LineTo 0, 164 | CurveTo 12, 176, 0, 170.627, 5.373, 176 | ClosePath 1
Path3 = 384, 176 | LineTo 384, 215.984 | CurveTo 424.971, 232.955, 384, 237.444, 409.961, 247.964 | LineTo 504.971, 152.971 | CurveTo 504.971, 119.03, 514.344, 143.598, 514.344, 128.402 | LineTo 424.971, 39.049 | CurveTo 384, 56.019, 409.943, 24.021, 384, 34.582 | LineTo 384, 96 | LineTo 325.215, 96 | ArcTo 316.442, 99.812, 12.004, 12.004, 0, 1, 0 | LineTo 96, 336 | LineTo 12, 336 | CurveTo 0, 348, 5.373, 336, 0, 341.373 | LineTo 0, 404 | CurveTo 12, 416, 0, 410.627, 5.373, 416 | LineTo 122.785, 416 | CurveTo 131.558, 412.188, 126.111, 416, 129.288, 414.619 | LineTo 352, 176 | LineTo 384, 176 | ClosePath 1
Fill=Fill Color #colorShuffleButton#
FillRef=colorShuffleButton
UpdateDivider=1

[MeterMediaPrev_]
Meter=Shape
MeterStyle=StyleMediaControls
Shape = Path Path1 | StrokeWidth 0 | Extend Fill
Shape2 = Path Path2 | StrokeWidth 0
Shape3 = Combine Shape1 | XOR Shape2 | Scale 0.02,0.02,0,0 | Offset 0,0.5
Path1 = 11.5, 280.6 | LineTo 203.5, 440.6 | CurveTo 256, 416, 224.1, 457.8, 256, 443.4 | LineTo 256, 96 | CurveTo 203.5, 71.4, 256, 68.6, 224.1, 54.2 | LineTo 11.5, 231.4 | CurveTo 11.5, 280.6, -3.8, 244.2, -3.8, 267.8 | ClosePath 1
Path2 = 267.5, 280.6 | LineTo 459.5, 440.6 | CurveTo 512, 416, 480.1, 457.8, 512, 443.4 | LineTo 512, 96 | CurveTo 459.5, 71.4, 512, 68.6, 480.1, 54.2 | LineTo 267.5, 231.4 | CurveTo 267.5, 280.6, 252.2, 244.2, 252.2, 267.8 | ClosePath 1

[MeterMediaPlayPause_]
Meter=Shape
MeterStyle=StyleMediaControls | StyleMedia[&Measure[#npType]MediaPlayPause]Button
Padding=1,0,2,0
UpdateDivider=1

[MeterMediaNext_]
Meter=Shape
MeterStyle=StyleMediaControls
Shape = Path Path1 | StrokeWidth 0 | Extend Fill
Shape2 = Path Path2 | StrokeWidth 0
Shape3 = Combine Shape1 | XOR Shape2 | Scale 0.02,0.02,0,0 | Offset 0,0.5
Path1 = 500.5, 231.4 | LineTo 308.5, 71.4 | CurveTo 256, 96, 287.9, 54.3, 256, 68.6 | LineTo 256, 416 | CurveTo 308.5, 440.6, 256, 443.4, 287.9, 457.8 | LineTo 500.5, 280.6 | CurveTo 500.5, 231.4, 515.8, 267.8, 515.8, 244.2 | ClosePath 1
Path2 = 244.5, 231.4 | LineTo 52.5, 71.4 | CurveTo 0, 96, 31.9, 54.3, 0, 68.6 | LineTo 0, 416 | CurveTo 52.5, 440.6, 0, 443.4, 31.9, 457.8 | LineTo 244.5, 280.6 | CurveTo 244.5, 231.4, 259.8, 267.8, 259.8, 244.2 | ClosePath 1

[MeterMediaRepeat_]
Meter=Shape
MeterStyle=StyleMediaControls
Shape = Path Path1 | StrokeWidth 0 | Extend Fill
Shape2 = Path Path2 | StrokeWidth 0
Shape3 = Path Path[&Measure[#npType]MediaRepeat] | StrokeWidth 0
Shape4 = Combine Shape1 | XOR Shape2 | XOR Shape3 | Scale 0.11,0.11,0,0 | Offset 0,-1
Path0 = 20.1,100 | LineTo 20.2,100
Path1 = 76.9, 9.9 | CurveTo 78.4, 21.6, 72.9, 13.9, 73.2, 16.5 | LineTo 82.7, 26 | LineTo 59.9, 26 | CurveTo 31.3, 28.1, 39.1, 26, 36.6, 26.2 | CurveTo 11.1, 48.3, 23.3, 31.1, 14.1, 40.3 | CurveTo 17.6, 80, 6.3, 61.3, 10.1, 80 | CurveTo 23, 76.4, 18.9, 80, 21.1, 78.5 | CurveTo 25.3, 70.1, 25.6, 73.4, 26, 72.3 | CurveTo 24.5, 60.4, 24.9, 68.7, 24.5, 64.3 | CurveTo 26.9, 49.8, 24.5, 54.6, 24.9, 52.7 | CurveTo 64.8, 40, 32.6, 41.5, 38.4, 40 | LineTo 83.4, 40 | LineTo 80.2, 43.3 | CurveTo 77, 48.6, 78.4, 45.1, 77, 47.5 | CurveTo 85.1, 56, 77, 51.4, 82.1, 56 | CurveTo 108, 33, 88.6, 56, 108, 36.5 | CurveTo 82.2, 7, 108, 29.6, 85.6, 7 | CurveTo 76.9, 9.9, 80.9, 7, 78.5, 8.3 | ClosePath 1
Path2 = 107, 45.6 | CurveTo 104.7, 51.9, 104.4, 48.6, 104, 49.7 | CurveTo 105.5, 61.6, 105.1, 53.3, 105.5, 57.7 | CurveTo 103.1, 72.2, 105.5, 67.4, 105.1, 69.3 | CurveTo 65.4, 82, 97.4, 80.5, 91.6, 82 | LineTo 47.2, 82 | LineTo 50.1, 79.1 | CurveTo 50.3, 68.8, 53.7, 75.4, 53.8, 72.4 | CurveTo 32.3, 76.2, 45.7, 64, 43.7, 64.8 | CurveTo 22, 89, 24.6, 83.8, 22, 87.1 | CurveTo 47.8, 115, 22, 92.4, 44.4, 115 | CurveTo 56, 106.9, 50.8, 115, 56, 109.8 | CurveTo 51.6, 100.4, 56, 105.7, 54.2, 102.9 | LineTo 47.3, 96 | LineTo 70.1, 96 | CurveTo 98.7, 93.9, 90.9, 96, 93.4, 95.8 | CurveTo 118.9, 73.7, 106.7, 90.9, 115.9, 81.7 | CurveTo 112.4, 42, 123.7, 60.7, 119.9, 42 | CurveTo 107, 45.6, 111.1, 42, 108.9, 43.5 | ClosePath 1
Path3 = 61.2, 50.3 | CurveTo 58, 54.6, 59.5, 52.1, 58, 54.1 | CurveTo 62.9, 58.5, 58, 56.3, 61.8, 59.3 | CurveTo 64, 62.9, 63.6, 58.1, 64, 59.6 | CurveTo 61.3, 68.2, 64, 67.6, 63.8, 67.9 | CurveTo 58.5, 71.5, 58.9, 68.5, 58.5, 69 | LineTo 58.5, 74.5 | LineTo 78.5, 74.5 | LineTo 78.5, 71.5 | CurveTo 75.8, 68.2, 78.5, 69, 78.1, 68.4 | LineTo 73.1, 67.9 | LineTo 72.8, 57.7 | LineTo 72.5, 47.5 | LineTo 68.5, 47.2 | CurveTo 61.2, 50.3, 65.1, 47, 64, 47.4 | ClosePath 1
Fill=Fill Color #colorRepeatButton#
FillRef=colorRepeatButton
UpdateDivider=1

; ----- Audio Visualizer -----

[MeterVisualizer]
Meter=Shape
Shape=Line #visualizerStartX#,(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand1:])),#visualizerStartX#,#vBarHeight# | Extend GlobalOptions
Shape2=Line (#visualizerStartX# + (#vBarWidth# * 1 / #scale#) + (#vBarGap# * 1)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand2:])),(#visualizerStartX# + (#vBarWidth# * 1 / #scale#) + (#vBarGap# * 1)),#vBarHeight# | Extend GlobalOptions
Shape3=Line (#visualizerStartX# + (#vBarWidth# * 2 / #scale#) + (#vBarGap# * 2)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand3:])),(#visualizerStartX# + (#vBarWidth# * 2 / #scale#) + (#vBarGap# * 2)),#vBarHeight# | Extend GlobalOptions
Shape4=Line (#visualizerStartX# + (#vBarWidth# * 3 / #scale#) + (#vBarGap# * 3)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand4:])),(#visualizerStartX# + (#vBarWidth# * 3 / #scale#) + (#vBarGap# * 3)),#vBarHeight# | Extend GlobalOptions
Shape5=Line (#visualizerStartX# + (#vBarWidth# * 4 / #scale#) + (#vBarGap# * 4)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand5:])),(#visualizerStartX# + (#vBarWidth# * 4 / #scale#) + (#vBarGap# * 4)),#vBarHeight# | Extend GlobalOptions
Shape6=Line (#visualizerStartX# + (#vBarWidth# * 5 / #scale#) + (#vBarGap# * 5)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand6:])),(#visualizerStartX# + (#vBarWidth# * 5 / #scale#) + (#vBarGap# * 5)),#vBarHeight# | Extend GlobalOptions
Shape7=Line (#visualizerStartX# + (#vBarWidth# * 6 / #scale#) + (#vBarGap# * 6)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand7:])),(#visualizerStartX# + (#vBarWidth# * 6 / #scale#) + (#vBarGap# * 6)),#vBarHeight# | Extend GlobalOptions
Shape8=Line (#visualizerStartX# + (#vBarWidth# * 7 / #scale#) + (#vBarGap# * 7)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand8:])),(#visualizerStartX# + (#vBarWidth# * 7 / #scale#) + (#vBarGap# * 7)),#vBarHeight# | Extend GlobalOptions
Shape9=Line (#visualizerStartX# + (#vBarWidth# * 8 / #scale#) + (#vBarGap# * 8)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand9:])),(#visualizerStartX# + (#vBarWidth# * 8 / #scale#) + (#vBarGap# * 8)),#vBarHeight# | Extend GlobalOptions
Shape10=Line (#visualizerStartX# + (#vBarWidth# * 9 / #scale#) + (#vBarGap# * 9)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand10:])),(#visualizerStartX# + (#vBarWidth# * 9 / #scale#) + (#vBarGap# * 9)),#vBarHeight# | Extend GlobalOptions
Shape11=Line (#visualizerStartX# + (#vBarWidth# * 10 / #scale#) + (#vBarGap# * 10)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand11:])),(#visualizerStartX# + (#vBarWidth# * 10 / #scale#) + (#vBarGap# * 10)),#vBarHeight# | Extend GlobalOptions
Shape12=Line (#visualizerStartX# + (#vBarWidth# * 11 / #scale#) + (#vBarGap# * 11)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand12:])),(#visualizerStartX# + (#vBarWidth# * 11 / #scale#) + (#vBarGap# * 11)),#vBarHeight# | Extend GlobalOptions
Shape13=Line (#visualizerStartX# + (#vBarWidth# * 12 / #scale#) + (#vBarGap# * 12)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand13:])),(#visualizerStartX# + (#vBarWidth# * 12 / #scale#) + (#vBarGap# * 12)),#vBarHeight# | Extend GlobalOptions
Shape14=Line (#visualizerStartX# + (#vBarWidth# * 13 / #scale#) + (#vBarGap# * 13)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand14:])),(#visualizerStartX# + (#vBarWidth# * 13 / #scale#) + (#vBarGap# * 13)),#vBarHeight# | Extend GlobalOptions
Shape15=Line (#visualizerStartX# + (#vBarWidth# * 14 / #scale#) + (#vBarGap# * 14)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand15:])),(#visualizerStartX# + (#vBarWidth# * 14 / #scale#) + (#vBarGap# * 14)),#vBarHeight# | Extend GlobalOptions
Shape16=Line (#visualizerStartX# + (#vBarWidth# * 15 / #scale#) + (#vBarGap# * 15)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand16:])),(#visualizerStartX# + (#vBarWidth# * 15 / #scale#) + (#vBarGap# * 15)),#vBarHeight# | Extend GlobalOptions
Shape17=Line (#visualizerStartX# + (#vBarWidth# * 16 / #scale#) + (#vBarGap# * 16)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand17:])),(#visualizerStartX# + (#vBarWidth# * 16 / #scale#) + (#vBarGap# * 16)),#vBarHeight# | Extend GlobalOptions
Shape18=Line (#visualizerStartX# + (#vBarWidth# * 17 / #scale#) + (#vBarGap# * 17)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand18:])),(#visualizerStartX# + (#vBarWidth# * 17 / #scale#) + (#vBarGap# * 17)),#vBarHeight# | Extend GlobalOptions
Shape19=Line (#visualizerStartX# + (#vBarWidth# * 18 / #scale#) + (#vBarGap# * 18)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand19:])),(#visualizerStartX# + (#vBarWidth# * 18 / #scale#) + (#vBarGap# * 18)),#vBarHeight# | Extend GlobalOptions
Shape20=Line (#visualizerStartX# + (#vBarWidth# * 19 / #scale#) + (#vBarGap# * 19)),(#vBarHeight# - (#vBarHeight# * [MeasureAudioBand20:])),(#visualizerStartX# + (#vBarWidth# * 19 / #scale#) + (#vBarGap# * 19)),#vBarHeight# | Extend GlobalOptions
; Shape21=Line (#visualizerStartX# + (#vBarWidth# * 2 / #scale#) + (#vBarGap# * 2)),0,(#visualizerStartX# + (#vBarWidth# * 2 / #scale#) + (#vBarGap# * 2)),#vBarHeight# | Extend GlobalOptions
GlobalOptions=StrokeWidth #vBarWidth# | Stroke Color #colorVisualizer# | StrokeStartCap Round | StrokeEndCap Round
SolidColor=255,255,255,0
X=#contentMargin#
Y=((#showMediaControls# > 0) ? ([MeterMediaNext_:Y] + [MeterMediaNext_:H] + (#showVisualizer# = 1 ? 8 : 3)) : ([MeterVolumePercentage:Y] + [MeterVolumePercentage:H] + (#showVisualizer# ? 5 : 1)))
W=#contentWidth#
H=(#vBarHeight# + 4)
DynamicVariables=1
UpdateDivider=1
Hidden=(#showVisualizer# = 0)
TransformationMatrix=#transformationMatrix#

[MeterBackgroundHeight]
Meter=Image
MeterStyle=StyleBackgroundHeight

[MeterConfigButton_]
Meter=Shape
MeterStyle=StyleConfigButtonNew
SolidColor=#colorBg#
ImageTint=#colorMain#
Padding=4,4,3,4
X=(#contentMarginRight# - 15)
Y=([MeterVisualizer:Y] + [MeterVisualizer:H] - 16)
DynamicVariables=1
Group=ConfigButton#showVisualizer#
Hidden=1

; ----- Mouse Regions -----

[MeterVolumeSliderMouseRegion]
Meter=Image
MeterStyle=StyleMouseRegion
MouseOverAction=[!CommandMeasure MeasureActionTimer "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureActionTimer "Execute 2"]
LeftMouseDownAction=[!CommandMeasure MeasureVolumeSliderMouse "Start"][!EnableMeasure MeasureVolumeSliderSet][!DisableMouseActionGroup * VolumeSliderActions]
MouseScrollUpAction=[!CommandMeasure MeasureVolume "ChangeVolume +5"]
MouseScrollDownAction=[!CommandMeasure MeasureVolume "ChangeVolume -5"]
MouseActionCursor=0
UpdateDivider=1
Group=VolumeSliderActions

[MeterVolumeDevice]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionStringButtonHover
ToolTipText=Switch to next device
LeftMouseUpAction=[!CommandMeasure MeasureVolume "ToggleNext"][!UpdateMeter #CURRENTSECTION#_][!Redraw]
Group=VolumeSliderActions

[MeterVolumeIcon]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHover
MouseLeaveAction=[!SetOption #CURRENTSECTION#_ Fill "Fill Color #colorAccent#"][!UpdateMeter #CURRENTSECTION#_][!Redraw]
LeftMouseUpAction=[!CommandMeasure MeasureVolume "ToggleMute"][!UpdateMeasure MeasureVolume][!Redraw]
ToolTipText=Toggle Mute
Group=VolumeSliderActions

[MeterConfigButton]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHover
LeftMouseUpAction=[!SkinCustomMenu]
Group=ConfigButton#showVisualizer#
Hidden=1

; Media Control Buttons
[MeterMediaShuffle]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHoverPreserve
; MouseLeaveAction=[!SetOption #CURRENTSECTION#_ Fill "Fill Color #*colorShuffleButton*#"][!UpdateMeter #CURRENTSECTION#_][!Redraw]
LeftMouseUpAction=[!EnableMeasure MeasureMediaShuffleButtonLogic][!UpdateMeasure MeasureMediaShuffleButtonLogic]
Group=ProgressSliderActions

[MeterMediaPrev]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHover
LeftMouseUpAction=[!CommandMeasure Measure[#npType]MediaCoverArt "Previous"]
Group=ProgressSliderActions

[MeterMediaPlayPause]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHover
LeftMouseUpAction=[!CommandMeasure Measure[#npType]MediaCoverArt "PlayPause"]
Group=ProgressSliderActions

[MeterMediaNext]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHover
LeftMouseUpAction=[!CommandMeasure Measure[#npType]MediaCoverArt "Next"]
Group=ProgressSliderActions

[MeterMediaRepeat]
Meter=Image
MeterStyle=StyleMouseRegion | StyleMouseRegionShapeButtonHoverPreserve
; MouseLeaveAction=[!SetOption #CURRENTSECTION#_ Fill "Fill Color #*colorRepeatButton*#"][!UpdateMeter #CURRENTSECTION#_][!Redraw]
LeftMouseUpAction=[!EnableMeasure MeasureMediaRepeatButtonLogic][!UpdateMeasure MeasureMediaRepeatButtonLogic]
Group=ProgressSliderActions

[MeterProgressSliderMouseRegion]
Meter=Image
MeterStyle=StyleMouseRegion
MouseOverAction=[!CommandMeasure MeasureActionTimer "Execute 6"]
MouseLeaveAction=[!CommandMeasure MeasureActionTimer "Execute 7"]
LeftMouseDownAction=[!CommandMeasure MeasureProgressSliderMouse "Start"][!EnableMeasure MeasureProgressSliderSet][!DisableMouseActionGroup * ProgressSliderActions]
MouseActionCursor=0
Group=ProgressSliderActions

[MeterMediaTitle-NoScaling]
Meter=Image
MeterStyle=StyleMouseRegion
MeasureName=Measure[#npType]MediaTitle
ToolTipText=%1

[MeterMediaArtist-NoScaling]
Meter=Image
MeterStyle=StyleMouseRegion
MeasureName=Measure[#npType]MediaArtist
ToolTipText=%1

[MeterMediaAlbum-NoScaling]
Meter=Image
MeterStyle=StyleMouseRegion
MeasureName=Measure[#npType]MediaAlbum
ToolTipText=%1
